---
// src/components/MindMap.astro
const { content, height = "400px" } = Astro.props;
---

<div class="mindmap-wrapper my-6 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 shadow-sm overflow-hidden flex flex-col">
    <div class="bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
        <span class="text-xs text-gray-500 dark:text-gray-400 font-medium">✨ 互动脑图 (支持鼠标拖拽与滚轮缩放)</span>
    </div>
    
    <div class="w-full relative" style={`height: ${height};`}>
        <div class="markmap" style="width: 100%; height: 100%;">
            <script type="text/template" set:html={content}></script>
        </div>
    </div>
</div>

<script is:inline src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>

<style is:global>
    /* 核心修复：强制 markmap 生成的 SVG 画布占满整个容器！ */
    .markmap > svg {
        width: 100% !important;
        height: 100% !important;
    }
    
    /* 深色模式文字和线条颜色适配 */
    html.dark .markmap svg text {
        fill: #D1D5DB !important; 
    }
    html.dark .markmap svg path.markmap-link {
        stroke: #4B5563 !important; 
    }
</style>